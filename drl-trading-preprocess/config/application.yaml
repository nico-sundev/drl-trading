# DRL Trading Preprocess Service - Base Configuration
# This file contains the common configuration that applies to all environments

# Basic Application Information
app_name: "drl-trading-preprocess"
version: "1.0.0"
stage: "local"

# Infrastructure Configuration
infrastructure:
  webapi:
    port: 8082
    host: "0.0.0.0"

logging:
  level: "INFO"

# Dask Configurations for different use cases
# Dask automatically handles task queuing based on num_workers
dask_configs:
  coverage_analysis:
    scheduler: "threads"              # I/O-bound: DB/Feast queries
    num_workers: null                 # Auto-detect for I/O operations
    threads_per_worker: 1
  feature_computation:
    scheduler: "threads"            # CPU-bound: Feature computation
    num_workers: 4                    # Explicit for predictable CPU usage
    threads_per_worker: 1

# Feature Computation Configuration
feature_computation_config:
  warmup_candles: 500  # Number of candles for indicator warmup (production default)

# Resampling Configuration
resample_config:
  historical_start_date: "1970-01-01T00:00:00"
  max_batch_size: 100000
  progress_log_interval: 10000
  enable_incomplete_candle_publishing: true
  chunk_size: 50000
  memory_warning_threshold_mb: 1000
  pagination_limit: 10000
  max_memory_usage_mb: 512
  state_persistence_enabled: true
  state_file_path: "state/resampling_context.json"
  state_backup_interval: 1000
  auto_cleanup_inactive_symbols: true
  inactive_symbol_threshold_hours: 24
